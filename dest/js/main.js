function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var n={},r=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,a()&&r.forEach(function(e){e()})},n[e]=!1,t.src=e}function a(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){r.push(e)},isReady:a}}();var Sun=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:450,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.x=t,this.y=n},Enemy=function(){function a(e,t,n,r){_classCallCheck(this,a),this.x=e,this.y=t,this.style=n,this.direction=r,this.speed=Math.floor(5*Math.random()+1)}return _createClass(a,[{key:"update",value:function(){1===parseInt(document.querySelector("#score span").textContent)?this.speed=Math.floor(5*Math.random()+5):2===parseInt(document.querySelector("#score span").textContent)?this.speed=Math.floor(5*Math.random()+10):3===parseInt(document.querySelector("#score span").textContent)?this.speed=Math.floor(5*Math.random()+15):4===parseInt(document.querySelector("#score span").textContent)?this.speed=Math.floor(5*Math.random()+20):5===parseInt(document.querySelector("#score span").textContent)&&(this.speed=Math.floor(5*Math.random()+25)),"ltr"===this.direction?(800<=this.x&&(this.direction="rtl"),this.x+=this.speed):"rtl"===this.direction&&(this.x<=0&&(this.direction="ltr"),this.x-=this.speed)}}]),a}(),Player=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:450,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:400;_classCallCheck(this,n),this.x=e,this.y=t}return _createClass(n,[{key:"update",value:function(){var t=this;allEnemies.forEach(function(e){Math.abs(e.x-t.x)<=80&&Math.abs(e.y-t.y)<=80&&("0"===document.querySelector("#lives span").textContent?(Swal.fire({title:"Game over",text:"Your hightest level is ".concat(document.querySelector("#score").textContent)}),document.querySelector("#lives span").textContent="3",document.querySelector("#score span").textContent="0",allEnemies.forEach(function(e){return e.speed=Math.floor(5*Math.random()+1)})):document.querySelector("#lives span").textContent="".concat(parseInt(document.querySelector("#lives span").textContent)-1),t.x=450,t.y=400)}),Math.abs(this.x-sun.x)<=50&&Math.abs(this.y-sun.y)<=50&&(document.querySelector("#score span").textContent="".concat(parseInt(document.querySelector("#score span").textContent)+1),this.x=450,this.y=400)}},{key:"handleInput",value:function(e){"left"===e&&0<this.x?this.x-=50:"up"===e&&0<this.y?this.y-=50:"right"===e&&this.x<800?this.x+=50:"down"===e&&this.y<400&&(this.y+=50)}}]),n}(),allEnemies=[new Enemy(Math.floor(800*Math.random()),50,"enemy1","ltr"),new Enemy(Math.floor(800*Math.random()),150,"enemy2","ltr"),new Enemy(Math.floor(800*Math.random()),250,"enemy3","ltr")],player=new Player,sun=new Sun;document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){e.document;var t,n=e.window,r=document.getElementById("canvas"),a=r.getContext("2d");function o(){var e=Date.now();(function(t){allEnemies.forEach(function(e){e.update(t)}),player.update()})((e-t)/1e3),a.clearRect(0,0,r.width,r.height),a.drawImage(Resources.get("images/background.png"),0,0),function(){a.drawImage(Resources.get("images/sun.png"),sun.x,sun.y),player.tickCount++,player.tickCount>player.ticksPerFrame&&(player.tickCount=0,player.frameIndex++);player.frameIndex>=player.numberOfFrames&&(player.frameIndex=0);var e=Resources.get("images/player.png");a.drawImage(e,0,player.frameIndex*e.naturalHeight/player.numberOfFrames,e.naturalWidth,e.naturalHeight/player.numberOfFrames,player.x,player.y,e.naturalWidth,e.naturalHeight/player.numberOfFrames),allEnemies.forEach(function(e){e.tickCount++,e.tickCount>e.ticksPerFrame&&(e.tickCount=0,e.frameIndex++),e.frameIndex>=e.numberOfFrames&&(e.frameIndex=0);var t=Resources.get("images/".concat(e.style,"-").concat(e.direction,".png"));a.drawImage(t,0,e.frameIndex*t.naturalHeight/e.numberOfFrames,t.naturalWidth,t.naturalHeight/e.numberOfFrames,e.x,e.y,t.naturalWidth,t.naturalHeight/e.numberOfFrames)})}(),t=e,n.requestAnimationFrame(o)}r.width=900,r.height=534,Resources.load(["images/background.png","images/enemy1-ltr.png","images/enemy2-ltr.png","images/enemy3-ltr.png","images/enemy1-rtl.png","images/enemy2-rtl.png","images/enemy3-rtl.png","images/enemy4-rtl.png","images/enemy4-ltr.png","images/sun.png","images/player.png"]),Resources.onReady(function(){allEnemies.forEach(function(e){e.tickCount=0,e.ticksPerFrame=5,e.frameIndex=0,e.numberOfFrames=3}),player.tickCount=0,player.ticksPerFrame=5,player.frameIndex=0,player.numberOfFrames=2,t=Date.now(),o()}),e.ctx=a}(this);